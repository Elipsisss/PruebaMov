<ion-header>
  <ion-toolbar>
    <ion-title> Registro </ion-title>
  </ion-toolbar>
</ion-header>


<ion-content>
  <div class="outer-container">
    <div class="login-container">
      <ion-card>
        <ion-card-header>
          <ion-card-title>Registrarse</ion-card-title>
        </ion-card-header>

        <ion-card-content>
          <form  [formGroup]="user" (ngSubmit)="submit()">
            <ion-item>
              <ion-input id ="email "formControlName="email" type="text" fill="solid" label="Correo Electrónico" labelPlacement="floating" ></ion-input>
            </ion-item>

            <ion-item *ngIf="user.get('email')?.invalid && (user.get('email')?.touched || user.get('email')?.dirty)">
              <ion-label color="danger">Correo electrónico inválido</ion-label>
            </ion-item>


            <ion-item>
              <ion-input  id="name" formControlName="name" type="text" fill="solid" label="Nombre" labelPlacement="floating" ></ion-input>
            </ion-item>

            <ion-item *ngIf="user.get('name')?.invalid && (user.get('name')?.touched || user.get('name')?.dirty)">
              <ion-label color="danger">Nombre inválido</ion-label>
            </ion-item>
            

            <ion-item>
              <ion-input  id="lastname" formControlName="lastname" type="text" fill="solid" label="Apellido" labelPlacement="floating" ></ion-input>
            </ion-item>

            
            <ion-item *ngIf="user.get('lastname')?.invalid && (user.get('lastname')?.touched || user.get('lastname')?.dirty)">
              <ion-label color="danger">Apellido inválido</ion-label>
            </ion-item>

            <ion-item> 
              <ion-input  id="rut" formControlName="rut" type="text" fill="solid" label="RUT" labelPlacement="floating" ></ion-input>
            </ion-item>

            <ion-item *ngIf="user.get('rut')?.invalid && (user.get('rut')?.touched || user.get('rut')?.dirty)">
              <ion-label color="danger">Rut inválido, debe de ingresar guión y el número verificador</ion-label>
            </ion-item>
            

            <ion-item>
              <ion-input  id="birthdate" formControlName="birthdate" type="date" fill="solid" labelPlacement="floating" label="Fecha de Nacimiento" >  </ion-input>
            </ion-item>

            <ion-item>
              <ion-select   formControlName="gender" fill="solid" labelPlacement="floating" label="Género"> 
              <ion-select-option>Masculino</ion-select-option>
              <ion-select-option>Femenino</ion-select-option>
              <ion-select-option>Otro</ion-select-option>
              </ion-select>
            </ion-item>

            <ion-item [ngClass]="{'invalid': user.get('password')?.invalid && user.get('password')?.touched}">
              <ion-input id="password" formControlName="password" type="password" fill="solid" label="Contraseña" labelPlacement="floating"></ion-input>
            </ion-item>

            <ion-item [ngClass]="{'invalid': user.get('confirmpassword')?.invalid && user.get('confirmpassword')?.touched}">
              <ion-input id="confirmpassword" formControlName="confirmpassword" type="password" fill="solid" label="Ingrese su contraseña nuevamente" labelPlacement="floating"></ion-input>
            </ion-item>

            <ion-item *ngIf="user.hasError('passwordsDoNotMatch')">
              <ion-label color="danger">Las contraseñas no coinciden</ion-label>
            </ion-item>


            
            <ion-button  expand="full" (click)="submit()">Registrarse</ion-button>

            <br> 
            <p style="text-align:center;">¿Ya tienes cuenta?<a routerLink="/login"> Iniciar sesión</a> </p>
          </form>
        </ion-card-content>
      </ion-card>
    </div>
  </div>
</ion-content>

