<ion-header>
  <ion-toolbar>
    <ion-title>Administración</ion-title>
    <ion-menu-button slot="start"></ion-menu-button>
  </ion-toolbar>
</ion-header>

<ion-content>
  <!-- Aquí vinculamos el FormGroup al formulario -->
   <ion-card-content>  
      <form [formGroup]="usuarioForm">
        <ion-item>
          <ion-input formControlName="name" type="text" fill ="solid" labelPlacement="floating" label ="Nombre"></ion-input>
        </ion-item>

        <ion-item *ngIf="usuarioForm.get('name')?.invalid && (usuarioForm.get('name')?.touched || usuarioForm.get('name')?.dirty)">
          <ion-label color="danger">Nombre inválido</ion-label>
        </ion-item>       

        <ion-item>
          <ion-input formControlName="email" type="email"  fill ="solid" labelPlacement="floating" label ="Correo Electrónico"></ion-input>
        </ion-item>

    
        <ion-item *ngIf="usuarioForm.get('email')?.invalid && (usuarioForm.get('email')?.touched || usuarioForm.get('email')?.dirty)">
          <ion-label color="danger">Correo electrónico inválido</ion-label>
        </ion-item>

        <ion-button (click)="editando ? guardarUsuarioEditado() : agregarUsuario()">  {{ editando ? 'Guardar Cambios' : 'Agregar Usuario' }} </ion-button>
        <ion-button *ngIf="editando" (click)="cancelarEdicion()">Cancelar</ion-button>
      </form>
  </ion-card-content>

  <ion-list>
    <ion-item *ngFor="let usuario of usuarios">
      {{usuario.id}} {{ usuario.name }} ({{ usuario.email }})
      <ion-button id = "ee" *ngIf="botonEditar" slot = "end" (click)="editarUsuario(usuario)">Editar</ion-button>
      <ion-button  id = "ee" *ngIf="botonEliminar"   slot ="end" (click)="eliminarUsuario(usuario.id)">Eliminar</ion-button>
    </ion-item>
  </ion-list>
</ion-content>
